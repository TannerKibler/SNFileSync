<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_236565_file_sync.FileSyncHelper</api_name>
        <client_callable>false</client_callable>
        <description/>
        <name>FileSyncHelper</name>
        <script><![CDATA[var FileSyncHelper = Class.create();
FileSyncHelper.prototype = {
	initialize: function() {
		this._configurationsTable = 'x_236565_file_sync_file_sync_configuration';
		this._processTable        = 'x_236565_file_sync_file_sync_process';
	},

	type: 'FileSyncHelper',

	returnConfigurations: function() {
		var grConfigurations, configurationsOb = {};
		grConfigurations = new GlideRecord(this._configurationsTable);
		grConfigurations.addQuery('active', true);
		grConfigurations.query();

		while (grConfigurations.next()) {
			var tmpOb = configurationsOb[grConfigurations.sys_id.toString()] = {};

			tmpOb.target_table  = grConfigurations.target_table.toString();
			tmpOb.target_record = grConfigurations.target_record.toString();
			tmpOb.file_name     = grConfigurations.source_file_name.toString();
			tmpOb.type          = grConfigurations.type.toString();
			tmpOb.subtype       = grConfigurations.subtype.toString();
		}

		return configurationsOb;
	},

	returnPassword: function(configurationSys) {
		if (!configurationSys)
			return false;

		var grConfiguration = new GlideRecord(this._configurationsTable);
		if (grConfiguration.get(configurationSys))
			return this._decryptPassword(grConfiguration.password.toString());

		return false;
	},

	_decryptPassword: function(encryptedPass) {
		if (!encryptedPass)
			return '';
		
		var encryptHelper = new GlideEncrypter(), decrypted;
		decrypted         = encryptHelper.decrypt(encryptedPass);
		
		return decrypted;
	},
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-01-20 20:52:46</sys_created_on>
        <sys_id>d7978232db472300ce90a455ca961950</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>FileSyncHelper</sys_name>
        <sys_package display_value="File Sync" source="x_236565_file_sync">411da93edbc32300ce90a455ca96195f</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="File Sync">411da93edbc32300ce90a455ca96195f</sys_scope>
        <sys_update_name>sys_script_include_d7978232db472300ce90a455ca961950</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-01-20 21:00:32</sys_updated_on>
    </sys_script_include>
</record_update>
